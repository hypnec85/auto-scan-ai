[프로젝트 기획안] 오토 스캔 (Auto Scan AI)
---
**프로젝트명**: 오토 스캔 (Auto Scan AI)
**부제**: 중고차 매물 분석기

**1. 프로젝트 목표:**
사용자가 중고차 매물 CSV 파일을 업로드하면, 파일을 분석하여 '기계 공학자' 관점에서 차량의 가치를 평가합니다. 주요 목표는 다음과 같습니다.
*   **Top 3 (Best Value) 차량 식별**: 사고 이력이 있더라도 구조적 손상이 없거나 경미한 (예: 단순 외판 교체) 차량 중 가성비가 뛰어난 매물을 식별하고 추천합니다.
*   **Worst 3 (Dangerous) 차량 식별**: 구조적 손상(프레임 손상 등)이 있거나 안전에 위협이 될 수 있는 차량을 식별하고 구매하지 않도록 경고합니다.
*   **엔지니어링 관점 리포트**: 각 차량에 대한 상세한 '엔지니어의 해설'을 제공하여 구매 결정에 도움을 줍니다. (Gemini 활용)

**2. 핵심 기능:**
*   **CSV 업로드**: 사용자가 중고차 매물 데이터를 CSV 형식으로 업로드.
*   **데이터 전처리**: 업로드된 CSV 데이터 정제 및 필요한 컬럼 추출.
*   **수리 내역 파싱 및 등급 분류**:
    *   `tier_system.txt` 및 `car_parts.txt`를 기반으로 차량의 사고 및 수리 내역을 분석하여 안전 등급 (Tier 1, 2, 3) 분류.
    *   **Tier 1 [Do Not Buy]**: 휠하우스, 사이드멤버, 필러 등 주요 골격 손상 차량.
    *   **Tier 2 [Warning]**: 인사이드 패널, 리어패널 등 2차 골격 손상 차량 또는 미확정 수리내역/내차피해액 존재 차량.
    *   **Tier 3 [Value Gem]**: 후드, 휀더, 도어 등 단순 외판 교체/수리 차량 (가성비 매물).
    *   **Tier 0 [Clean]**: 무사고 차량.
*   **LLM (Gemini) 기반 리포트 생성**:
    *   분석된 데이터를 바탕으로 Gemini 모델이 '보수적이고 깐깐한 기계 공학자' 페르소나로 Top 3 및 Worst 3 차량에 대한 상세 분석 리포트 생성.
    *   보고서에는 각 차량의 위험 요소 및 가성비 요소를 명확히 제시.
*   **Streamlit UI**: 위 기능을 사용자 친화적인 웹 인터페이스로 제공.

**3. 기술 스택:**
*   **언어**: Python
*   **웹 프레임워크**: Streamlit (UI/UX 담당)
*   **데이터 처리**: Pandas
*   **LLM**: Google Gemini API (텍스트 분석 및 리포트 생성)
*   **환경 관리**: Poetry (예정)

**4. 데이터 소스:**
*   `중고차(20251128).csv`: 샘플 중고차 매물 데이터. (실제 데이터는 사용자 업로드)
*   `tier_system.txt`: 사고 등급 분류 기준 정의.
*   `car_parts.txt`: 자동차 부위별 분류 (외판/골격).

**5. 개발 단계:**
1.  **데이터 로딩 및 전처리 모듈 개발**: `utils.py` 에 `load_data` 함수 구현.
2.  **수리 내역 파싱 및 등급 분류 로직 개발**: `utils.py` 에 `parse_repair_history` 및 `categorize_car` 함수 구현.
3.  **Streamlit UI 구성**: `app.py` 에 파일 업로드, 데이터 표시, 분석 결과 표시 등 기본 UI 구현.
4.  **Gemini API 연동 및 리포트 생성**: `utils.py` 에 `generate_engineer_report` 함수 구현 및 `app.py` 에서 호출.
5.  **LLM 프롬프트 엔지니어링**: '기계 공학자' 페르소나 및 상세 분석 기준을 포함하는 프롬프트 최적화.
6.  **테스트 및 디버깅**: `test_logic.py` 를 통한 핵심 로직 검증.
7.  **배포**: (필요시) Streamlit Cloud 또는 다른 플랫폼에 배포.

**6. 고려사항:**
*   **API Key 관리**: `.env` 파일을 사용하여 API 키 보안 유지.
*   **LLM 응답의 신뢰성**: AI 리포트의 내용을 맹신하지 않도록 경고 문구 추가.
*   **성능 최적화**: 대량의 CSV 파일 처리 시 성능 저하 방지.
*   **확장성**: 향후 더 많은 분석 기준 및 사용자 맞춤형 옵션 추가 가능성 고려.

---
**최종 목표**: 중고차 구매자들이 불량 매물을 걸러내고, 합리적인 가격의 양질의 차량을 선택할 수 있도록 돕는 신뢰성 있는 도구 제공.